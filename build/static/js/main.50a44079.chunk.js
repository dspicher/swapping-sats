(this["webpackJsonpswapping-sats"]=this["webpackJsonpswapping-sats"]||[]).push([[0],{31:function(t,e,n){"use strict";n.r(e),n.d(e,"fetchTransaction",(function(){return i}));var a=n(9),r=n.n(a),u=n(15),c=n(54);function i(t){return s.apply(this,arguments)}function s(){return(s=Object(u.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://blockstream.info/api/","tx/",t.next=4,c("https://blockstream.info/api/tx/"+e);case 4:return n=t.sent,t.abrupt("return",n.json());case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},42:function(t,e,n){t.exports=n(56)},47:function(t,e,n){},53:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e),n.d(e,"recursivePropertyChecker",(function(){return c}));var a=n(9),r=n.n(a),u=n(15);function c(t,e,n){return i.apply(this,arguments)}function i(){return(i=Object(u.a)(r.a.mark((function t(e,n,a){var i,s,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.stop(e)){t.next=4;break}return t.abrupt("return",{holds:!0});case 4:if(!a.fail(e)){t.next=8;break}return t.abrupt("return",{holds:!1,counterExample:[e]});case 8:return t.next=10,n(e);case 10:if(null!=(i=t.sent)&&0!==i.length){t.next=13;break}return t.abrupt("return",{holds:!0});case 13:return t.next=15,Promise.all(i.map(function(){var t=Object(u.a)(r.a.mark((function t(e){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(e,n,a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 15:if(!(s=t.sent).map((function(t){return t.holds})).every((function(t){return t}))){t.next=20;break}return t.abrupt("return",{holds:!0});case 20:return o=s.findIndex((function(t){return!t.holds})),t.abrupt("return",{holds:!1,counterExample:[e].concat(s[o].counterExample)});case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},56:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),u=n(7),c=n.n(u),i=(n(47),n(11)),s=n(10),o=n(13),l=n(12),p=n(14),h=n(9),f=n.n(h),m=n(15),d=n(91),b=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).state={isLoaded:!1,amount:null,error:null},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"postEstimate",value:function(){var t=Object(m.a)(f.a.mark((function t(e,n){var a,r,u,c,i;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://exchange.api.bity.com/v2/orders/estimate",a={currency:"BTC",amount:(e/1e8).toString()},r={currency:"CHF"},n?(u={input:a,output:r},c="output"):(u={input:r,output:a},c="input"),t.next=6,this.postData("https://exchange.api.bity.com/v2/orders/estimate",u);case 6:return i=t.sent,t.abrupt("return",parseFloat(i[c].amount));case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"postData",value:function(){var t=Object(m.a)(f.a.mark((function t(){var e,n,a,r=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"",n=r.length>1&&void 0!==r[1]?r[1]:{},t.next=4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)});case 4:return a=t.sent,t.next=7,a.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.postEstimate(this.props.amount,this.props.isOutput).then((function(e){return t.setState({amount:e,isLoaded:!0})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"BityFiatAmount"},this.state.isLoaded?r.a.createElement("div",null,this.state.amount.toLocaleString(navigator.language,{style:"currency",currency:"CHF"})):r.a.createElement(d.a,{size:20}))}}]),e}(r.a.Component),v=n(95),E=n(99),y=n(98),x=n(96),O=n(97),j=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"TransactionOutputs"},null!=this.props.outputs?r.a.createElement(v.a,null,r.a.createElement(x.a,null,r.a.createElement(O.a,null,r.a.createElement(y.a,null,"Adress"),r.a.createElement(y.a,null,"Satoshis"),r.a.createElement(y.a,null,"Bity buy"),r.a.createElement(y.a,null,"Bity sell"))),r.a.createElement(E.a,null,this.props.outputs.map((function(t,e){return r.a.createElement(O.a,{key:e},r.a.createElement(y.a,null,t.addresses),r.a.createElement(y.a,null,t.value.toLocaleString()),r.a.createElement(y.a,null,r.a.createElement(b,{isOutput:!1,amount:t.value})),r.a.createElement(y.a,null,r.a.createElement(b,{isOutput:!0,amount:t.value})))})))):r.a.createElement("p",null,"Enter a valid TXID"))}}]),e}(r.a.Component),g=n(104),k=n(100),w=n(4),T=function(t){return{textFld:{width:1e3,height:40}}},C=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"isValidTxid",value:function(t){return null!=t&&64===t.length}},{key:"handleChange",value:function(t){this.isValidTxid(t.target.value)&&this.props.onTxidChange(t.target.value)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"TransactionInput"},r.a.createElement(k.a,{container:!0,spacing:5,direction:"row",alignItems:"center",justify:"center"},r.a.createElement(k.a,{item:!0},r.a.createElement(g.a,{id:"outlined-basic",label:"TXID",margin:"normal",onChange:function(e){return t.handleChange(e)},variant:"outlined",style:T.textFld}))))}}]),e}(r.a.Component),S=Object(w.a)(T)(C),B=function(t){function e(){return Object(i.a)(this,e),Object(o.a)(this,Object(l.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"TransactionInput"},null!=this.props.rbf?this.props.rbf.holds?r.a.createElement("p",null,"not rbf"):1===this.props.rbf.counterExample.length?r.a.createElement("p",null,"This transaction signals RBF"):r.a.createElement("div",null,r.a.createElement("p",null,"The following unconfirmed ancestor transaction signals RBF"),r.a.createElement("p",null,this.props.rbf.counterExample[this.props.rbf.counterExample.length-1].txid)):r.a.createElement("p",null))}}]),e}(r.a.Component),F=n(101),I=(n(53),n(31)),N=n(31),D=n(55);function L(t){return t.status.confirmed}function P(t){return t.sequence<Math.pow(2,32)-2}function A(t){return t.vin.map(P).some((function(t){return t}))}function J(t){return Promise.all(t.vin.map((function(t){return N.fetchTransaction(t.txid)})))}function _(){return(_=Object(m.a)(f.a.mark((function t(e){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={stop:L,fail:A},t.next=3,N.fetchTransaction(e);case 3:return a=t.sent,t.next=6,D.recursivePropertyChecker(a,J,n);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H=n(102),M=n(103),R=function(t){function e(t){var n;return Object(i.a)(this,e),(n=Object(o.a)(this,Object(l.a)(e).call(this,t))).state={outputs:null,rbf:null},n}return Object(p.a)(e,t),Object(s.a)(e,[{key:"handleTxidChange",value:function(t){var e=this;Object(I.fetchTransaction)(t).then((function(t){return t.vout})).then((function(t){return t.map((function(t){return{value:t.value,addresses:t.scriptpubkey_address,script_type:t.script_type}}))})).then((function(t){return e.setState({outputs:t})})),function(t){return _.apply(this,arguments)}(t).then((function(t){return e.setState({rbf:t})}))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"App"},r.a.createElement(F.a,null,r.a.createElement(H.a,{className:"main-card"},r.a.createElement(M.a,null,r.a.createElement(S,{onTxidChange:function(e){return t.handleTxidChange(e)}}),r.a.createElement(B,{rbf:this.state.rbf}),r.a.createElement(j,{outputs:this.state.outputs})))))}}]),e}(r.a.Component),V=Object(w.a)((function(t){return{}}))(R);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.50a44079.chunk.js.map